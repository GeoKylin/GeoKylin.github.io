<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>样例文章 | GeoKylin</title>
    <meta name="robots" content="index, follow">
    <meta name="renderer" content="webkit"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <meta http-equiv="Cache-Control" content="no-transform"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <meta name="theme-color" content="#f8f5ec"/>
    <meta name="msapplication-navbutton-color" content="#f8f5ec">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">
    <meta name="author" content="GeoKylin"/>
    <meta name="description" content="GeoKylin 的地球物理学个人学术博客"/>
    <meta name="keywords" content="GeoKylin, 王锴, KaiWang, 博客, blog, 地球物理学, Geophysics, 地震学, Seismology"/>
    <meta name="generator" content="Hugo 0.53 with even 4.0.0"/>
    <link rel="canonical" href="http://ztcug.cn/GeoKylin/blog/articles/sample.html"/>
    <link rel="shortcut icon" type=image/x-icon href=../../img/favicon.png>
    <link rel=icon type=image/x-icon href=../../img/favicon.png>
    <link rel="apple-touch-icon" type=image/x-icon href="../../img/favicon.png">
    <link rel="manifest" href="../man/manifest.json">
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link href="../css/even.c1094c8f.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css"
          integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"
          crossorigin="anonymous">
    <meta property="og:title" content="样例文章 | GeoKylin"/>
    <meta property="og:description" content="GeoKylin 的地球物理学个人学术博客"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="http://ztcug.cn/GeoKylin/blog/articles/sample.html"/>
    <meta property="article:published_time" content="2019-01-07T00:00:00&#43;08:00"/>
    <meta property="article:modified_time" content="2018-01-07T00:00:00&#43;08:00"/>
    <meta itemprop="name" content="样例文章 | GeoKylin">
    <meta itemprop="description" content="GeoKylin 的地球物理学个人学术博客">
    <meta itemprop="datePublished" content="2019-01-07T00:00:00&#43;08:00"/>
    <meta itemprop="dateModified" content="2019-01-07T00:00:00&#43;08:00"/>
    <meta itemprop="wordCount" content="3872">
    <meta itemprop="keywords" content="GeoKylin, 王锴, KaiWang, 博客, blog, 地球物理学, Geophysics, 地震学, Seismology"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="样例文章 | GeoKylin"/>
    <meta name="twitter:description" content="GeoKylin 的地球物理学个人学术博客"/>
    <!--[if lte IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
    <![endif]-->
    <!--[if lt IE 9]>
    <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
</head>
<body style="background-color: rgba(250,250,250,0.5)">
<div id="mobile-navbar" class="mobile-navbar">
    <div class="mobile-header-logo">
        <a href="../" class="logo">GeoKylin</a>
    </div>
    <div class="mobile-navbar-icon">
        <span></span>
        <span></span>
        <span></span>
    </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
    <ul class="mobile-menu-list">
        <a href="../">
            <li class="mobile-menu-item">首页</li>
        </a>
        <a href="../post/">
            <li class="mobile-menu-item">归档</li>
        </a>
        <a href="../categories/">
            <li class="mobile-menu-item">分类</li>
        </a>
        <a href="../tags/">
            <li class="mobile-menu-item">标签</li>
        </a>
        <a href="../links/">
            <li class="mobile-menu-item">链接</li>
        </a>
        <a href="../collections/">
            <li class="mobile-menu-item">合集</li>
        </a>
        <a href="../donations/">
            <li class="mobile-menu-item">捐赠</li>
        </a>
        <a href="../about/">
            <li class="mobile-menu-item">关于</li>
        </a>
    </ul>
</nav>
<div class="container" id="mobile-panel">
    <header id="header" class="header" style="background-color: rgba(250,250,250,0.5)">
        <div class="logo-wrapper">
            <a href="../" class="logo">GeoKylin</a>
        </div>
        <nav class="site-navbar">
            <ul id="menu" class="menu">
                <li class="menu-item">
                    <a class="menu-item-link" href="../">首页</a>
                </li>
                <li class="menu-item">
                    <a class="menu-item-link" href="../post/">归档</a>
                </li>
                <li class="menu-item">
                    <a class="menu-item-link" href="../categories/">分类</a>
                </li>
                <li class="menu-item">
                    <a class="menu-item-link" href="../tags/">标签</a>
                </li>
                <li class="menu-item">
                    <a class="menu-item-link" href="../links/">链接</a>
                </li>
                <li class="menu-item">
                    <a class="menu-item-link" href="../collections/">合集</a>
                </li>
                <li class="menu-item">
                    <a class="menu-item-link" href="../donations/">捐赠</a>
                </li>
                <li class="menu-item">
                    <a class="menu-item-link" href="../about/">关于</a>
                </li>
            </ul>
        </nav>
    </header>
    <main id="main" class="main">
        <div class="content-wrapper">
            <div id="content" class="content">
                <article class="post">
                    <header class="post-header">
                        <h1 class="post-title">样例文章</h1>
                        <div class="post-meta">
                            <span class="post-time">
                                <i class="fa fa-calendar" aria-hidden="true"></i>
                                2018-07-13
                            </span>
                            <span class="more-meta">
                                <i class="fa fa-book" aria-hidden="true"></i>
                                约 3872 字
                            </span>
                            <span class="more-meta">
                                <i class="fa fa-clock-o" aria-hidden="true"></i>
                                预计阅读 8 分钟
                            </span>
                            <span id="busuanzi_container_page_pv" class="more-meta">
                                <i class="fa fa-eye" aria-hidden="true"></i>
                                <span id="busuanzi_value_page_pv">
                                    <img src="../img/spinner.svg" alt="spinner.svg"/>
                                </span>
                                次阅读
                            </span>
                            <span class="more-meta">
                                    <i class="fa fa-paperclip" aria-hidden="true"></i>
                                    <a href="../categories/Test/">Test</a>
                                </span>
                            <div class="post-tags">
                                <i class="fa fa-tag" aria-hidden="true"></i>
                                <a href="../tags/xiaoshuo/">小说</a>
                                <i class="fa fa-tag" aria-hidden="true"></i>
                                <a href="../tags/baike/">百科</a>
                            </div>
                        </div>
                    </header>

                    <div class="post-toc" id="post-toc">
                        <h2 class="post-toc-title">文章目录</h2>
                        <div class="post-toc-content">
                            <nav id="TableOfContents">
                                <ul>
                                    <li>
                                        <ul>
                                            <li><a href="#快速开始">快速开始</a>
                                                <ul>
                                                    <li><a href="#引入-starter">引入 starter</a></li>
                                                    <li><a href="#将实体类暴露为接口">将实体类暴露为接口</a>
                                                        <ul>
                                                            <li><a href="#c-创建">C 创建</a></li>
                                                            <li><a href="#r-查询">R 查询</a></li>
                                                            <li><a href="#u-更新">U 更新</a></li>
                                                            <li><a href="#d-删除">D 删除</a></li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li><a href="#将实体暴露为接口">将实体暴露为接口</a></li>
                                            <li><a href="#非持久化-可计算属性">非持久化/可计算属性</a></li>
                                            <li><a href="#hooks">Hooks</a>
                                                <ul>
                                                    <li><a href="#位于实体类中的-hooks">位于实体类中的 Hooks</a></li>
                                                    <li><a href="#function-hooks">Function Hooks</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="#依赖注入">依赖注入</a></li>
                                            <li><a href="#验证-jsr303">验证(JSR303)</a></li>
                                            <li><a href="#权限控制">权限控制</a>
                                                <ul>
                                                    <li><a href="#permission-annotations">Permission Annotations</a>
                                                        <ul>
                                                            <li><a href="#readpermission">ReadPermission</a></li>
                                                            <li><a href="#updatepermission">UpdatePermission</a></li>
                                                            <li><a href="#createpermission">CreatePermission</a></li>
                                                            <li><a href="#deletepermission">DeletePermission</a></li>
                                                            <li><a href="#sharepermission">SharePermission</a></li>
                                                        </ul>
                                                    </li>
                                                    <li><a href="#user-checks">User Checks</a></li>
                                                    <li><a href="#operation-checks">Operation Checks</a></li>
                                                    <li><a href="#filter-expression-checks">Filter Expression Checks</a>
                                                    </li>
                                                    <li><a href="#同时使用多个-check">同时使用多个 Check</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="#json-api">JSON API</a></li>
                                            <li><a href="#graphql">GraphQL</a></li>
                                            <li><a href="#swagger">Swagger</a></li>
                                            <li><a href="#写在后头">写在后头</a></li>
                                            <li><a href="#reference-next">Reference &amp; Next</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="post-content">
                        <p>
                            <a href="https://baike.baidu.com/item/战争与和平/9134429?fr=aladdin" target="_blank">《战争与和平》</a>是俄国作家<a href="https://baike.baidu.com/item/列夫·尼古拉耶维奇·托尔斯泰/1250657" target="_blank">列夫·尼古拉耶维奇·托尔斯泰</a>创作的长篇小说，也是其代表作，创作于1863—1869年。
                        </p>
                        <p>
                            该作以1812年的卫国战争为中心，反映从1805到1820年间的重大历史事件。以鲍尔康斯、别祖霍夫、罗斯托夫和库拉金四大贵族的经历为主线，在战争与和平的交替描写中把众多的事件和人物串联起来。
                        </p>
                        <div class="admonition note">
                            <p class="admonition-title">Note</p>
                            <p>
                                作者将“战争”与“和平”的两种生活、两条线索交叉描写，构成一部百科全书式的壮阔史诗。
                            </p>
                        </div>
                        <h2 id="快速开始">快速开始</h2>
                        <h3 id="引入-starter">引入 starter</h3>
                        <p>引入 starter 即可完成自动配置</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.illyasviel.elide<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>elide-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.4.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <p>如果你需要 GraphQL 的接口，你需要额外引入</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.yahoo.elide<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>elide-graphql<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>${elide.version}<span class="nt">&lt;/version&gt;</span> <span class="c">&lt;!-- 目前 starter 指定版本为 4.2.3 --&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h3 id="将实体类暴露为接口">将实体类暴露为接口</h3>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span
            class="s">&#34;users&#34;</span><span class="o">)</span>
<span class="nd">@Entity</span>
<span class="nd">@Include</span><span class="o">(</span><span class="n">rootLevel</span> <span class="o">=</span> <span
            class="kc">true</span><span class="o">)</span>  <span class="c1">// &lt;---- 在你实体类上添加一行注解
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span
            class="o">{</span>

  <span class="kd">private</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">username</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">password</span><span class="o">;</span>

  <span class="nd">@Id</span>
  <span class="nd">@GeneratedValue</span>
  <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">getId</span><span
            class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">id</span><span
            class="o">;</span> <span class="o">}</span>

  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getUsername</span><span
            class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span
            class="n">username</span><span class="o">;</span> <span class="o">}</span>

  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getPassword</span><span
            class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span
            class="n">password</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <p>OK，完成了 😂。你已经拥有了 CRUD 的 API 接口了，现在来试试吧。</p>
                        <div class="admonition warning"><p class="admonition-title">Warning</p>
                            <p>请注意你的 JPA 及下文所述的注解最好放在 get 方法上，Elide 目前没有完全支持位于 field 上的注解。</p>
                        </div>
                        <h4 id="c-创建">C 创建</h4>
                        <p>使用 JSON API 创建 user</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span
        class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&#34;data&#34;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&#34;type&#34;</span><span class="o">:</span> <span class="s2">&#34;user&#34;</span><span
            class="p">,</span>
    <span class="s2">&#34;attributes&#34;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&#34;username&#34;</span><span class="o">:</span> <span class="s2">&#34;test&#34;</span><span
            class="p">,</span>
      <span class="s2">&#34;password&#34;</span><span class="o">:</span> <span class="s2">&#34;test&#34;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">fetch</span><span class="p">(</span><span
            class="s1">&#39;http://localhost:8080/api/user&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;Accept&#39;</span><span class="o">:</span> <span
            class="s1">&#39;application/vnd.api+json&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/vnd.api+json&#39;</span><span
            class="p">,</span>
  <span class="p">},</span>
  <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span
            class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span
            class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span
            class="nx">ok</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span
            class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span
            class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span
            class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <p>使用 GraphQL 创建 user</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">payload</span> <span
        class="o">=</span> <span class="p">{</span>
  <span class="s2">&#34;query&#34;</span><span class="o">:</span> <span class="s2">&#34;mutation createUser($name: String, $pw: String) { user(op: UPSERT, data: { username: $name, password: $pw }) { edges { node { id username } } } }&#34;</span><span
            class="p">,</span>
  <span class="s2">&#34;variables&#34;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;alice&#34;</span><span
            class="p">,</span>
    <span class="s2">&#34;pw&#34;</span><span class="o">:</span> <span class="s2">&#34;123&#34;</span><span
            class="p">,</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/api/graphql&#39;</span><span
            class="p">,</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;Accept&#39;</span><span class="o">:</span> <span
            class="s1">&#39;application/json&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span
            class="s1">&#39;application/json&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span
            class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">),</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span
            class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span
            class="nx">ok</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span
            class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span
            class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span
            class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h4 id="r-查询">R 查询</h4>

                        <p>使用 JSON API <strong>分页 &amp; 过滤 &amp; 指定属性 &amp; 排序</strong>查询 user</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">fetch</span><span class="p">(</span><span
        class="nb">encodeURI</span><span class="p">(</span><span class="s2">&#34;http://localhost:8080/api/user?filter[user]=username==&#39;test&#39;&amp;fields[user]=id,username&amp;sort=-id&amp;page[number]=1&amp;page[size]=3&amp;page[totals]&#34;</span><span
        class="p">),</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;Accept&#39;</span><span class="o">:</span> <span
            class="s1">&#39;application/vnd.api+json&#39;</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span
            class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span
            class="nx">ok</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span
            class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span
            class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span
            class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <p>使用 GraphQL 查询 user</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span
        class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&#34;query&#34;</span><span class="o">:</span> <span class="s2">&#34;query { user { edges { node { id username } } } }&#34;</span>
<span class="p">};</span>
<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/api/graphql&#39;</span><span
            class="p">,</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;Accept&#39;</span><span class="o">:</span> <span
            class="s1">&#39;application/json&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span
            class="s1">&#39;application/json&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span
            class="nx">stringify</span><span class="p">(</span><span class="nx">query</span><span class="p">),</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span
            class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span
            class="nx">ok</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span
            class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span
            class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span
            class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h4 id="u-更新">U 更新</h4>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span
        class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&#34;data&#34;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&#34;id&#34;</span><span class="o">:</span> <span class="s2">&#34;1&#34;</span><span
            class="p">,</span>
    <span class="s2">&#34;type&#34;</span><span class="o">:</span> <span class="s2">&#34;user&#34;</span><span
            class="p">,</span>
    <span class="s2">&#34;attributes&#34;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&#34;username&#34;</span><span class="o">:</span> <span class="s2">&#34;new name&#34;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">fetch</span><span class="p">(</span><span
            class="s1">&#39;http://localhost:8080/api/user/1&#39;</span><span class="p">,</span> <span
            class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;PATCH&#39;</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;Accept&#39;</span><span class="o">:</span> <span
            class="s1">&#39;application/vnd.api+json&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/vnd.api+json&#39;</span><span
            class="p">,</span>
  <span class="p">},</span>
  <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span
            class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span
            class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span
            class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span
            class="nx">status</span> <span class="o">===</span> <span class="mi">204</span> <span
            class="o">?</span> <span class="s1">&#39;ok&#39;</span> <span class="o">:</span> <span class="s1">&#39;failure&#39;</span><span
            class="p">));</span>
</code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h4 id="d-删除">D 删除</h4>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">fetch</span><span class="p">(</span><span
        class="s1">&#39;http://localhost:8080/api/user/1&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;DELETE&#39;</span><span
            class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;Accept&#39;</span><span class="o">:</span> <span
            class="s1">&#39;application/vnd.api+json&#39;</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span
            class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span
            class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span
            class="nx">status</span> <span class="o">===</span> <span class="mi">204</span> <span
            class="o">?</span> <span class="s1">&#39;ok&#39;</span> <span class="o">:</span> <span class="s1">&#39;failure&#39;</span><span
            class="p">));</span>
</code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h2 id="将实体暴露为接口">将实体暴露为接口</h2>

                        <p>将实体暴露为接口只需要为其添加 <code>@Include</code> 或 <code>@Include(rootLevel=true)</code>
                            注解即可，暴露的路径默认为实体名称的首字母小写形式，即 <code>User</code> -&gt; <code>user</code>，不指定
                            <code>rootLevel</code> 的实体无法从根路径直接访问。</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Include</span><span
        class="o">(</span><span class="n">rootLevel</span><span class="o">=</span><span class="kc">true</span><span
        class="o">)</span>
<span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Author</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">Book</span><span
            class="o">&gt;</span> <span class="n">books</span><span class="o">;</span>
  <span class="o">...</span>
  <span class="nd">@ManyToMany</span>
  <span class="kd">public</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">Book</span><span
            class="o">&gt;</span> <span class="nf">getBooks</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">books</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>

<span class="nd">@Include</span>
<span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Set</span><span class="o">&lt;</span><span
            class="n">Author</span><span class="o">&gt;</span> <span class="n">authors</span><span class="o">;</span>
  <span class="o">...</span>
  <span class="nd">@ManyToMany</span>
  <span class="kd">public</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">Author</span><span
            class="o">&gt;</span> <span class="nf">getAuthors</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">authors</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <p>
                            例如上述代码，你无法直接访问 Book，即 <code>/api/book</code> 不是一个有效的路径，必须通过其他暴露于根路径的关系抵达，如 <code>/api/author/:authorId/books</code>。
                        </p>
                        <p>
                            被 <code>@Include</code> 注解的实体类将暴露其所有的属性，除非你使用 <code>@Transient</code> 或 <code>@Exclude</code>
                            标记属性。被 <code>@Transient</code> 标记的属性会同时被 Elide 于 JPA 忽略，而被 <code>@Exclude</code> 标记的属性只会被
                            Elide 忽略。
                        </p>
                        <h2 id="非持久化-可计算属性">非持久化/可计算属性</h2>

                        <p>
                            通过 <code>@ComputedAttribute</code> 或 <code>@ComputedRelationship</code> 注解你可以暴露一个不存在于 JPA
                            中的属性。该属性与其他属性并没有什么不同，只是会因为 <code>@Transient</code> 而被 JPA 忽略。
                        </p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Include</span>
<span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="nd">@Transient</span>
  <span class="nd">@ComputedAttribute</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMyComputedAttribute</span><span
            class="o">(</span><span class="n">RequestScope</span> <span class="n">requestScope</span><span
            class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="s">&#34;My special string stored only in the JVM!&#34;</span><span
            class="o">;</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <p><code>RequestScope</code> 是可选参数，该属性最后形成 <code>myComputedAttribute</code> 这样的字段。</p>
                        <h2 id="hooks">Hooks</h2>
                        <p>Hooks 给予你在 CRUD 事件中触发其它业务逻辑或是对该操作对应的实体类进行修改的机会，目前支持三种不同的时期：</p>
                        <ol>
                            <li><em>Pre Security</em> - 权限检查前</li>
                            <li><em>Pre Commit</em> - 事务提交前，有可能已经 flush 了</li>
                            <li><em>Post Commit</em> - 事务提交后</li>
                            <li>
                                <del>没有 <em>Post Security</em> 呢</del>
                            </li>
                        </ol>

                        <p>各个时期所对应 CRUD 注解：</p>

                        <ul>
                            <li><code>@OnCreatePreSecurity</code></li>
                            <li><code>@OnCreatePreCommit</code></li>
                            <li><code>@OnCreatePostCommit</code></li>
                            <li><code>@OnDeletePreSecurity</code></li>
                            <li><code>@OnDeletePreCommit</code></li>
                            <li><code>@OnDeletePostCommit</code></li>
                            <li><code>@OnUpdatePreSecurity(value)</code></li>
                            <li><code>@OnUpdatePreCommit(value)</code></li>
                            <li><code>@OnUpdatePostCommit(value)</code></li>
                            <li><code>@OnReadPreSecurity(value)</code></li>
                            <li><code>@OnReadPreCommit(value)</code></li>
                            <li><code>@OnReadPostCommit(value)</code></li>
                        </ul>

                        <p>value 为可选值，若指定 value，则仅当指定属性的指定操作发生时触发；若 value 为空，则注解针对实体，即只要该实体的某个属性触发了指定操作就会触发。</p>

                        <h3 id="位于实体类中的-hooks">位于实体类中的 Hooks</h3>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Entity</span>
<span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="nd">@Column</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>

  <span class="nd">@OnReadPreSecurity</span><span class="o">(</span><span class="s">&#34;title&#34;</span><span
            class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onReadTitle</span><span
            class="o">()</span> <span class="o">{</span>
    <span class="c1">// 查询 title 属性时触发，GraphQL 必须显示指定，而 JSON API 可以显示指定
</span><span class="c1"></span>    <span class="c1">// 权限检查前触发
</span><span class="c1"></span>  <span class="o">}</span>

  <span class="nd">@OnUpdatePreSecurity</span><span class="o">(</span><span class="s">&#34;title&#34;</span><span
            class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onUpdateTitle</span><span
            class="o">()</span> <span class="o">{</span>
    <span class="c1">// 更新 title 属性时
</span><span class="c1"></span>    <span class="c1">// 权限检查前触发
</span><span class="c1"></span>  <span class="o">}</span>

  <span class="nd">@OnUpdatePostCommit</span><span class="o">(</span><span class="s">&#34;title&#34;</span><span
            class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCommitTitle</span><span
            class="o">()</span> <span class="o">{</span>
    <span class="c1">// 更新 title 属性时
</span><span class="c1"></span>    <span class="c1">// 事务提交后
</span><span class="c1"></span>  <span class="o">}</span>

  <span class="nd">@OnCreatePostCommit</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCommitBook</span><span
            class="o">()</span> <span class="o">{</span>
    <span class="c1">// 创建实体时触发
</span><span class="c1"></span>    <span class="c1">// 事务提交后触发
</span><span class="c1"></span>  <span class="o">}</span>

  <span class="cm">/**
</span><span class="cm">   * 所有的触发器函数都可以可选的接受 `RequestScope` 参数
</span><span class="cm">   * 该参数可用于访问从 Spring MVC Controller 的参数中获取到的 Principle 对象
</span><span class="cm">   */</span>
  <span class="nd">@OnDeletePreCommit</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onDeleteBook</span><span
            class="o">(</span><span class="n">RequestScope</span> <span class="n">scope</span><span
            class="o">)</span> <span class="o">{</span>
    <span class="c1">// 删除实体时触发
</span><span class="c1"></span>    <span class="c1">// 事务提交前触发
</span><span class="c1"></span>  <span class="o">}</span>
<span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <p>更新操作的触发器函数还可接收一个 <code>ChangeSpec</code> 参数，该参数包含了指定属性修改前和修改后的值。但请注意，目前来说，若没有指定属性时，即 <code>@OnUpdatePreSecurity</code>
                            只要是更新操作就会触发，此时 <code>ChangeSpec</code> 是没有有效值的。</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@OnUpdatePreSecurity</span><span
        class="o">(</span><span class="s">&#34;title&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onUpdateTitle</span><span
            class="o">(</span><span class="n">RequestScope</span> <span class="n">scope</span><span
            class="o">,</span> <span class="n">ChangeSpec</span> <span class="n">changeSpec</span><span
            class="o">)</span> <span class="o">{</span>
  <span class="c1">// 当 title 被修改时（PATCH 请求包含 title 属性且从数据库读取的值和 PATCH 中给定的值不一致时）触发
</span><span class="c1"></span>  <span class="c1">// 权限检查前触发
</span><span class="c1"></span>  <span class="c1">// 修改后 changeSpec.getModified，修改前 changeSpec.getOriginal
</span><span class="c1"></span><span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="admonition tip"><p class="admonition-title">Tip</p>
                            <p>在开启 Spring 的依赖注入后（由 starter 提供，默认开启），你可以在实体类中使用
                                <code>@Autowired</code>，<code>@Inject</code> 等注解注入 Bean 以供触发器函数使用&hellip;个人建议你关掉它，用下面提到的
                                Function Hooks。</p>

                        </div>

                        <h3 id="function-hooks">Function Hooks</h3>

                        <p>如果你不想污染你的实体类，可以实现 <code>LifeCycleHook&lt;Entity&gt;</code> 接口将逻辑与实体类分离。这里使用了 starter 提供
                            <code>@ElideHook</code> 注解自动绑定 Function Hook，该注解的 <code>fieldOrMethodName</code> 为可选值，与上述的
                            value 值等价。</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@ElideHook</span><span
        class="o">(</span><span class="n">lifeCycle</span> <span class="o">=</span> <span
        class="n">OnUpdatePreCommit</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span
        class="n">fieldOrMethodName</span> <span class="o">=</span> <span class="s">&#34;password&#34;</span><span
        class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserOnUpdatePreCommit</span> <span
            class="kd">implements</span> <span class="n">LifeCycleHook</span><span class="o">&lt;</span><span class="n">User</span><span
            class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">PasswordEncoder</span> <span class="n">passwordEncoder</span><span
            class="o">;</span>

  <span class="nd">@Autowired</span>
  <span class="kd">public</span> <span class="nf">UserOnUpdatePreCommit</span><span class="o">(</span><span class="n">PasswordEncoder</span> <span
            class="n">passwordEncoder</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">passwordEncoder</span> <span class="o">=</span> <span
            class="n">passwordEncoder</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span
            class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">,</span> <span
            class="n">RequestScope</span> <span class="n">requestScope</span><span class="o">,</span> <span class="n">Optional</span><span
            class="o">&lt;</span><span class="n">ChangeSpec</span><span class="o">&gt;</span> <span
            class="n">changes</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// encode password
</span><span class="c1"></span>  <span class="o">}</span>
<span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h2 id="依赖注入">依赖注入</h2>

                        <p>由 starter 提供的功能，每次 Elide 实例化一个实体时 Spring 都会尝试自动注入 Bean。如前文所言，个人建议关掉这个默认开启的功能&hellip;</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="c"># application.yml</span><span
        class="w">
</span><span class="w"></span>elide<span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="c"># 关闭 Spring 依赖注入</span><span class="w">
</span><span class="w">  </span>spring-dependency-injection<span class="p">:</span><span class="w"> </span><span
        class="kc">false</span><span class="w">
</span><span class="w">  </span><span class="c"># 顺带一提，建议开启这个默认关闭的配置，使返回的错误对象符合 JSON API 及 GraphQL 规范</span><span
        class="w">
</span><span class="w">  </span>return-error-objects<span class="p">:</span><span class="w"> </span><span class="kc">true</span><span
        class="w"> </span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h2 id="验证-jsr303">验证(JSR303)</h2>

                        <p>将注解应用在 get 方法上即可，目前来说实际上是由 Hibernate 提供的功能，所以你在 <code>On..PreSecurity</code>
                            中访问到的实际上是未经验证的值，可以注入 <code>Validators</code> 手动调用验证。</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@NotNull</span><span
        class="o">(</span><span class="n">message</span> <span class="o">=</span> <span
        class="s">&#34;密码不应该为空&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">getPassword</span><span
            class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span
            class="n">password</span><span class="o">;</span> <span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h2 id="权限控制">权限控制</h2>

                        <h3 id="permission-annotations">Permission Annotations</h3>

                        <p>权限控制由 5 个注解实现，<code>ReadPermission</code>, <code>UpdatePermission</code>, <code>CreatePermission</code>,
                            <code>DeletePermission</code>, <code>SharePermission</code>。除 <code>SharePermission</code>
                            外都接受一个字符串形式的表达式，该字符串包含若干个 <code>Check</code>，可由 <code>AND</code>, <code>OR</code>,
                            <code>NOT</code>, <code>小括号</code> 以及 <code>Check</code> 组成，只有当该表达式组成的 <code>Check</code> 返回
                            <code>True</code> 时指定操作才可执行。</p>

                        <p>权限注解会向上进行寻找直到发现或使用默认值，遵循下述顺序，即优先级由高到底（<strong>可覆盖</strong>）：</p>

                        <ol>
                            <li>get 方法上的注解</li>
                            <li>类注解</li>
                            <li>该包下 package-info 上的注解</li>
                            <li>默认值</li>
                        </ol>

                        <p>默认情况下，实体类拥有除 <code>SharePermission</code> 的所有权限。</p>

                        <h4 id="readpermission">ReadPermission</h4>

                        <p>标识<strong>字段或实体</strong>是否可读取，该权限会分层进行评估，例如 <code>GET /users/1/posts/3/comments/99</code>
                            这个请求分为三个步骤：</p>

                        <ol>
                            <li><code>User&lt;1&gt;#posts</code> 是否可读。</li>
                            <li><code>Post&lt;3&gt;#comments</code> 是否可读。</li>
                            <li><code>Comment&lt;99&gt;</code> 是否可读，若可读，还将逐个检查声明要读取的字段。</li>
                        </ol>

                        <h4 id="updatepermission">UpdatePermission</h4>

                        <p>标识<strong>实体或字段</strong>是否可更新，除更新操作外，创建或更改一个双向关系时，对侧的 <code>UpdatePermission</code> 也需要进行评估。
                        </p>

                        <h4 id="createpermission">CreatePermission</h4>

                        <p>标识<strong>实体或字段</strong>是否可在 POST 请求中初始化数据。</p>

                        <h4 id="deletepermission">DeletePermission</h4>

                        <p>标识<strong>实体</strong>是否可删除</p>

                        <div class="admonition question"><p class="admonition-title">Question</p>
                            <p>JSON API 支持只删除关联而不删除实体，那么该注解是否于关系字段仍然有效？可以自行尝试一下~</p>

                        </div>

                        <h4 id="sharepermission">SharePermission</h4>

                        <p>这是唯一默认不拥有的权限，标记一个已存在（不是该请求新建的）的实体是否可以被其它实体关联。例如，新建（POST）一个 <code>Phone</code>
                            对象，并指定其所有者（<code>owner</code> 为已经存在的实体），如果该 <code>owner</code> 实体不拥有
                            <code>SharePermission</code> 则视为没有权限这样做。</p>

                        <h3 id="user-checks">User Checks</h3>

                        <p>User Check 继承自 <code>com.yahoo.elide.security.checks.UserCheck</code>，返回的 boolean
                            值标识当前用户是否拥有进行指定操作的权限。</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span
        class="kd">class</span> <span class="nc">UserCheck</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span
            class="n">String</span> <span class="n">REJECT_ALL</span> <span class="o">=</span> <span class="s">&#34;reject all&#34;</span><span
            class="o">;</span>

  <span class="nd">@ElideCheck</span><span class="o">(</span><span class="n">REJECT_ALL</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span
            class="nc">RejectAll</span> <span class="kd">extends</span> <span class="n">com</span><span
            class="o">.</span><span class="na">yahoo</span><span class="o">.</span><span class="na">elide</span><span
            class="o">.</span><span class="na">security</span><span class="o">.</span><span
            class="na">checks</span><span class="o">.</span><span class="na">UserCheck</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">ok</span><span
            class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">)</span> <span
            class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <p>与 Function hooks 一样，为了免去手动绑定这个繁琐的任务，使用由 starter 提供的 <code>@ElideCheck</code> 注解自动绑定
                            Check，该注解接收一个全局唯一的字符串用于标识该 Check，后续可在相应的实体类或字段上这样使用：</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@NotNull</span>
<span class="nd">@ReadPermission</span><span class="o">(</span><span class="n">expression</span> <span
            class="o">=</span> <span class="n">REJECT_ALL</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">getPassword</span><span
            class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span
            class="n">password</span><span class="o">;</span> <span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <p>现在，任何人都无法读取 password 这个字段了。</p>

                        <div class="admonition tip"><p class="admonition-title">Tip</p>
                            <p>Elide 提供了多个预置的 Check，上述的 <code>@ReadPermission(expression = REJECT_ALL)</code> 等价于 <code>@ReadPermission(expression
                                = &quot;Prefab.Role.None&quot;)</code>，相应的 <code>&quot;Prefab.Role.All&quot;</code> 总是返回
                                <code>true</code>。</p>

                        </div>

                        <h3 id="operation-checks">Operation Checks</h3>

                        <p>User Check 继承自 <code>OperationCheck&lt;Entity&gt;</code>，与 User Checks 不同的是，Operation Checks
                            <strong>可以</strong>也<strong>需要</strong>读取实体的数据，需要注意的是这个过程是在内存中进行的。</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span
        class="kd">class</span> <span class="nc">UserPropertyCheck</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span
            class="n">String</span> <span class="n">EMAIL_PUBLIC</span> <span class="o">=</span> <span class="s">&#34;email.public&#34;</span><span
            class="o">;</span>

  <span class="nd">@ElideCheck</span><span class="o">(</span><span class="n">EMAIL_PUBLIC</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">EmailCheck</span> <span
            class="kd">extends</span> <span class="n">OperationCheck</span><span class="o">&lt;</span><span class="n">User</span><span
            class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">ok</span><span
            class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">,</span> <span
            class="n">RequestScope</span> <span class="n">requestScope</span><span class="o">,</span> <span class="n">Optional</span><span
            class="o">&lt;</span><span class="n">ChangeSpec</span><span class="o">&gt;</span> <span
            class="n">changeSpec</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span
            class="na">getEmailPublic</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="admonition warning"><p class="admonition-title">Warning</p>
                            <p>截至目前，如果你将 Operation Checks 置于类级别上，此时你将在内存中过滤实体，此时该实体将不再支持分页，你可以考虑使用下面的 Filter Expression
                                Checks 或者把 Checks 分散于该实体的属性上。</p>

                        </div>

                        <h3 id="filter-expression-checks">Filter Expression Checks</h3>

                        <p>Filter Expression Checks 继承自 <code>FilterExpressionCheck&lt;Entity&gt;</code>，该类型的 Check
                            将直接应用到 where 子句中。</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span
        class="kd">class</span> <span class="nc">TopicFilterCheck</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span
            class="n">String</span> <span class="n">NON_DELETE</span> <span class="o">=</span> <span class="s">&#34;topic.delete.false.filter&#34;</span><span
            class="o">;</span>

  <span class="nd">@ElideCheck</span><span class="o">(</span><span class="n">NON_DELETE</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">TopicNotDeleteFilter</span> <span
            class="kd">extends</span> <span class="n">FilterExpressionCheck</span><span class="o">&lt;</span><span
            class="n">Topic</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">FilterExpression</span> <span
            class="nf">getFilterExpression</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;?&gt;</span> <span
            class="n">entityClass</span><span class="o">,</span> <span class="n">RequestScope</span> <span class="n">requestScope</span><span
            class="o">)</span> <span class="o">{</span>

      <span class="c1">// 类似 `topic.delete in (false)` 这样的子句会被添加到 where 条件中
</span><span class="c1"></span>      <span class="k">return</span> <span class="k">new</span> <span class="n">FilterPredicate</span><span
            class="o">(</span>
          <span class="k">new</span> <span class="n">PathElement</span><span class="o">(</span><span
            class="n">Topic</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span
            class="n">Boolean</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span
            class="s">&#34;delete&#34;</span><span class="o">),</span>
          <span class="n">Operator</span><span class="o">.</span><span class="na">IN</span><span class="o">,</span>
          <span class="n">Collections</span><span class="o">.</span><span class="na">singletonList</span><span
            class="o">(</span><span class="kc">false</span><span class="o">));</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h3 id="同时使用多个-check">同时使用多个 Check</h3>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@ReadPermission</span><span class="o">(</span><span
        class="n">expression</span> <span class="o">=</span> <span class="n">PermissionCheck</span><span
        class="o">.</span><span class="na">TOPIC_DELETE_PERMISSION</span>
    <span class="o">+</span> <span class="s">&#34; OR (&#34;</span> <span class="o">+</span> <span class="n">TopicFilterCheck</span><span
            class="o">.</span><span class="na">NON_DELETE</span>
    <span class="o">+</span> <span class="s">&#34; OR &#34;</span> <span class="o">+</span> <span class="n">PermissionCheck</span><span
            class="o">.</span><span class="na">TOPIC_DELETE_OWN_PERMISSION</span>
    <span class="o">+</span> <span class="s">&#34; AND &#34;</span> <span class="o">+</span> <span class="n">TopicFilterCheck</span><span
            class="o">.</span><span class="na">DELETE_BY_SELF</span>
    <span class="o">+</span> <span class="s">&#34;)&#34;</span><span class="o">)</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h2 id="json-api">JSON API</h2>

                        <p>可从 <a href="http://elide.io/pages/guide/10-jsonapi.html">Elide JSON API</a>，<a
                                href="http://jsonapi.org/">JSON API Spec</a>，<a
                                href="https://github.com/yahoo/elide/tree/master/elide-integration-tests/src/test/groovy/com/yahoo/elide/tests">测试用例</a>查看更多信息。
                        </p>

                        <h2 id="graphql">GraphQL</h2>

                        <p>可从 <a href="http://elide.io/pages/guide/11-graphql.html">Elide GraphQL</a>，<a
                                href="https://graphql.org/">GraphQL</a>，<a
                                href="https://github.com/yahoo/elide/tree/master/elide-integration-tests/src/test/groovy/com/yahoo/elide/tests">测试用例</a>查看更多信息。
                        </p>

                        <h2 id="swagger">Swagger</h2>

                        <p>Elide 提供了自动生成文档的工具，除了 swagger 相应的依赖（swagger 自身或是 springfox 之类的），只需要额外添加</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.yahoo.elide<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>elide-swagger<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>${elide.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <p>下述代码即可获得 json 格式的 swagger 文档，更多关于 swagger 的信息可以查看文档，怎么使用 swagger 也不多说了~~</p>
                        <div class="highlight">
                            <div class="chroma">
                                <table class="lntable">
                                    <tr>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre>
                                        </td>
                                        <td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="n">Elide</span> <span class="n">elide</span><span class="o">;</span>

<span class="kd">public</span> <span class="n">String</span> <span class="nf">getElideDoc</span><span
            class="o">()</span> <span class="o">{</span>
  <span class="n">Info</span> <span class="n">info</span> <span class="o">=</span> <span class="n">getInfo</span><span
            class="o">();</span>
  <span class="n">Swagger</span> <span class="n">swagger</span> <span class="o">=</span> <span
            class="k">new</span> <span class="n">SwaggerBuilder</span><span class="o">(</span><span
            class="n">elide</span><span class="o">.</span><span class="na">getElideSettings</span><span
            class="o">().</span><span class="na">getDictionary</span><span class="o">(),</span> <span
            class="n">info</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
  <span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span
            class="n">SwaggerBuilder</span><span class="o">.</span><span class="na">getDocument</span><span
            class="o">(</span><span class="n">swagger</span><span class="o">);</span>
  <span class="k">return</span> <span class="n">json</span><span class="o">;</span>
<span class="o">}</span></code></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <h2 id="写在后头">写在后头</h2>

                        <ul>
                            <li>虽然号称基于 JPA，实际上严重依赖于 Hibernate，想换 EclipseLink 是不可能的。╮(╯▽╰)╭</li>
                            <li>所有的查询操作都是使用 HQL 生成的不带关系的查询，即使是 <code>ToOne</code> 也要额外查询，务必需要配置好缓存。</li>
                            <li><code>OnUpdatePreSecurity</code> 阶段无法重新设置被修改的属性，但是修改其它未被修改的属性还是没问题的。</li>
                            <li>他们家的文档挺粗糙的，关于 JSON API 和 GraphQL 的语法可以去翻阅测试用例。</li>
                            <li>他们家的文档挺粗糙的，可以试试搜索 issue。</li>
                            <li>用这个造了一个<a
                                    href="https://github.com/bicarb/bicarb-core/tree/master/src/main/java/org/bicarb/core/forum">玩具</a>，唔，可以于
                                check, hook, domain 查看更多例子。
                            </li>
                        </ul>

                        <h2 id="reference-next">Reference &amp; Next</h2>

                        <ul>
                            <li><a href="http://elide.io/">Elide Documentation</a></li>
                            <li><a href="http://jsonapi.org/">JSON API</a> &amp; <a
                                    href="https://graphql.org/">GraphQL</a></li>
                            <li>
                                <a href="https://github.com/illyasviel/elide-spring-boot">illyasviel/elide-spring-boot</a>
                            </li>
                        </ul>
                    </div>

                    <div class="post-copyright">
                        <p class="copyright-item">
                            <span class="item-title">文章作者</span>
                            <span class="item-content">
                                <a href="../../index.html" class="theme-link">
                                    GeoKylin
                                </a>
                            </span>
                        </p>
                        <p class="copyright-item">
                            <span class="item-title">上次更新</span>
                            <span class="item-content">2019-01-07</span>
                        </p>
                        <p class="copyright-item">
                            <span class="item-title">许可协议</span>
                            <span class="item-content">
                                <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" title="(CC BY 4.0)">
                                    <i class="fa fa-creative-commons"></i>
                                    创作共用 BY-NC-SA 4.0 国际许可证
                                </a>
                            </span>
                        </p>
                    </div>
                    <div class="post-reward">
                        <input type="checkbox" name="reward" id="reward" hidden />
                        <label class="reward-button" for="reward">赞赏支持</label>
                        <div class="qr-code">
                            <label class="qr-code-image" for="reward">
                                <img class="image" src="/images/wechatpay-qr-code.png">
                                <span>微信打赏</span>
                            </label>
                            <label class="qr-code-image" for="reward">
                                <img class="image" src="/images/alipay-qr-code.png">
                                <span>支付宝打赏</span>
                            </label>
                        </div>
                    </div>
                    <footer class="post-footer">
                        <nav class="post-nav">
                            <a class="next" href="/post/jpa-generation-type-insert-benchmark-on-postgresql/">
                                <span class="next-text nav-default">下一篇</span>
                                <span class="next-text nav-mobile">下一篇</span>
                                <i class="iconfont icon-right"></i>
                            </a>
                        </nav>
                    </footer>
                </article>
            </div>

            <div id="disqus_thread"></div>
            <script type="text/javascript">
                document.addEventListener('DOMContentLoaded', function () {
                    if (window.location.hostname === 'localhost') return;
                    var disqus_config = function () {
                        this.page.url = "https:\/\/blog.olowolo.com\/post\/generate-json-api-and-graphql-api-by-elide-and-spring\/";
                        this.page.identifier = "\/post\/generate-json-api-and-graphql-api-by-elide-and-spring\/";
                    };

                    var dsq = document.createElement('script');
                    dsq.type = 'text/javascript';
                    dsq.async = true;
                    var disqus_shortname = 'blog-olowolo';
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                });
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
                Disqus.</a></noscript>
        </div>
    </main>

    <footer id="footer" class="footer" style="background-color: rgba(250,250,250,0.5)">
        <div class="social-links">
            <a href="https://github.com/GeoKylin" class="iconfont icon-github" title="github" target=_blank></a>
            <a href=https://weibo.com/u/5602644538 class="iconfont icon-weibo" title="weibo" target=_blank></a>
            <a href=../../index.html class="iconfont icon-link" title="home" target=_blank></a>
            <a href="mailto:wangkai185@mails.ucas.edu.cn" class="iconfont icon-email" title="email" target=_blank></a>
        </div>
        <div class="copyright">
            <div class="busuanzi-footer">
                <span id="busuanzi_container_site_uv">
                    <span id="busuanzi_value_site_uv">
                        <img src="../img/spinner.svg" alt="spinner.svg"/>
                    </span>
                    位读者阅读了
                    <span id="busuanzi_value_site_pv">
                        <img src="../img/spinner.svg" alt="spinner.svg"/>
                    </span>
                    次
                </span>
            </div>
            <span class="copyright-year">
                Copyright &copy; 2019 - 2019 <a href=../index.html class="theme-link" target="_blank">GeoKylin</a> &middot; Powered by the <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even" target="_blank">Even theme</a> for <a class="hexo-link" href="https://gohugo.io" target="_blank">Hugo</a>.
            </span>
        </div>
    </footer>

    <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js"
        integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js"
        integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="../js/even.ece58db6.min.js"></script>
<script type="application/javascript">
    var doNotTrack = false;
    if (!doNotTrack) {
        window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
        };
        ga.l = +new Date;
        ga('create', 'UA-93997803-4', 'auto');

        ga('send', 'pageview');
    }
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script type="text/javascript" src="../../js/canvas-nest.min.js" color="0,0,0" opacity='0.5' zIndex="-1" count="100"></script>
</body>
</html>
